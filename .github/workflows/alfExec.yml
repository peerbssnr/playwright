name: ALF Execute
env: 
  mftCloud_Pass: ${{ secrets.IPAASPREPRODAWS_PASS }}
  SwagCloud_Pass: ${{ secrets.IPAASPREPRODAWS_PASS }}
on:
  workflow_dispatch:
    inputs:   
      SwagCloud_Url:
        type: choice
        description: 'SwagCloud Url'
        options: 
        - https://ipaaspreprodaws.mycloud-us-west-2.softwareag-preprod.cloud/site/index.html#/        
        default: check
        required: true
      SwagCloud_User:
        type: string
        description: 'SwagCloud User'      
        default: mftuser
        required: true
      mftCloud_Url:
        type: choice
        description: 'MftCloud Url'
        options: 
        - https://ipaaspreprodaws.mft-aw-us.webmethods-preprod.io/mft/
        default: check
        required: true
      mftCloud_User:
        type: string
        description: 'MftCloud User'      
        default: mftuser
        required: true
jobs:
  test:
    timeout-minutes: 60
    runs-on: self-hosted
    steps:    
      - name: Start ALF
        run: |
          #echo "mftCloud_Url: ${{ github.event.inputs.mftCloud_Url }}"
          #$env:mftCloud_Url = ${{ github.event.inputs.mftCloud_Url }}
          ant -f Codebase/wmio-MFT-targets.xml "start-ALF-Web" -DmftCloud_Url=https://ipaaspreprodaws.mft-aw-us.webmethods-preprod.io/mft/
          ant -f Codebase/alf-tools/startALF.xml "start.logmonitor.agent"
          ant -f Codebase/job-targets_Docker.xml "loadCloudProperties"
          ant -f Codebase/.xml "updateCloudServerURLsToCurlCommands"
        shell: powershell

