<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport"
		  content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Test Step Analysis</title>
	<link rel="icon" href="..\resources\lib\analysis.ico">
	<link rel="stylesheet" href="..\resources\lib\bootstrap.min.css">
	<script src="..\resources\lib\jquery.min.js"></script>
	<script src="..\resources\lib\Chart.min.js"></script>
	<script src="..\resources\lib\bootstrap.min.js"></script>
	<script src="..\resources\lib\angular.min.js"></script>
	<script src="..\resources\lib\angular-chart.min.js"></script>
	<script>
		var pageData = {
			currentMachineData:[{"Build_Num":"100724183347466","Status":"FAILURE","action_revision":"1713867220924","Data":{"data":[{"key":"columnname1","value":"Folders","id":0},{"key":"relative_command","value":"preceding","id":1},{"key":"columnname2","value":"Refresh","id":2},{"key":"columnname3","value":"Tree configuration","id":3},{"key":"columnname4","value":"Add virtual folder","id":4}]},"Time":"0","category":["MFTCLOUD"],"sqlTimeStamp":"2024-07-10 13:06:15","machineExecuted":"dcmfttest01","Remark":""},{"Build_Num":"100724180908806","Status":"FAILURE","action_revision":"1713867220924","Data":{"data":[{"key":"columnname1","value":"Folders","id":0},{"key":"relative_command","value":"preceding","id":1},{"key":"columnname2","value":"Refresh","id":2},{"key":"columnname3","value":"Tree configuration","id":3},{"key":"columnname4","value":"Add virtual folder","id":4}]},"Time":"0","category":["MFTCLOUD"],"sqlTimeStamp":"2024-07-10 12:39:54","machineExecuted":"dcmfttest01","Remark":""}],
			anyMachineData    :[{"Build_Num":"100724183347466","Status":"FAILURE","action_revision":"1713867220924","Data":{"data":[{"key":"columnname1","value":"Folders","id":0},{"key":"relative_command","value":"preceding","id":1},{"key":"columnname2","value":"Refresh","id":2},{"key":"columnname3","value":"Tree configuration","id":3},{"key":"columnname4","value":"Add virtual folder","id":4}]},"Time":"0","category":["MFTCLOUD"],"sqlTimeStamp":"2024-07-10 13:06:15","machineExecuted":"dcmfttest01","Remark":""},{"Build_Num":"100724180908806","Status":"FAILURE","action_revision":"1713867220924","Data":{"data":[{"key":"columnname1","value":"Folders","id":0},{"key":"relative_command","value":"preceding","id":1},{"key":"columnname2","value":"Refresh","id":2},{"key":"columnname3","value":"Tree configuration","id":3},{"key":"columnname4","value":"Add virtual folder","id":4}]},"Time":"0","category":["MFTCLOUD"],"sqlTimeStamp":"2024-07-10 12:39:54","machineExecuted":"dcmfttest01","Remark":""},{"Build_Num":"080724152114917","Status":"SUCCESS","action_revision":"1713867220924","Data":{"data":[{"key":"columnname1","value":"Folders","id":0},{"key":"relative_command","value":"preceding","id":1},{"key":"columnname2","value":"Refresh","id":2},{"key":"columnname3","value":"Tree configuration","id":3},{"key":"columnname4","value":"Add virtual folder","id":4}]},"Time":"69326","category":["MFTCLOUD"],"sqlTimeStamp":"2024-07-08 10:26:35","machineExecuted":"vmntx-mft01","Remark":""},{"Build_Num":"070724220434461","Status":"SUCCESS","action_revision":"1713867220924","Data":{"data":[{"key":"columnname1","value":"Folders","id":0},{"key":"relative_command","value":"preceding","id":1},{"key":"columnname2","value":"Refresh","id":2},{"key":"columnname3","value":"Tree configuration","id":3},{"key":"columnname4","value":"Add virtual folder","id":4}]},"Time":"16845","category":["MFTCLOUD"],"sqlTimeStamp":"2024-07-07 17:11:35","machineExecuted":"vmntx-mft01","Remark":""},{"Build_Num":"04072416104752","Status":"SUCCESS","action_revision":"1713867220924","Data":{"data":[{"key":"columnname1","value":"Folders","id":0},{"key":"relative_command","value":"preceding","id":1},{"key":"columnname2","value":"Refresh","id":2},{"key":"columnname3","value":"Tree configuration","id":3},{"key":"columnname4","value":"Add virtual folder","id":4}]},"Time":"16971","category":["AWS"],"sqlTimeStamp":"2024-07-04 12:35:03","machineExecuted":"dccletest01","Remark":""},{"Build_Num":"040724125842773","Status":"FAILURE","action_revision":"1713867220924","Data":{"data":[{"key":"columnname1","value":"Folders","id":0},{"key":"relative_command","value":"preceding","id":1},{"key":"columnname2","value":"Refresh","id":2},{"key":"columnname3","value":"Tree configuration","id":3},{"key":"columnname4","value":"Add virtual folder","id":4}]},"Time":"0","category":["AZURE"],"sqlTimeStamp":"2024-07-04 09:41:39","machineExecuted":"dccletest01","Remark":""},{"Build_Num":"020724183714201","Status":"SUCCESS","action_revision":"1713867220924","Data":{"data":[{"key":"columnname1","value":"Folders","id":0},{"key":"relative_command","value":"preceding","id":1},{"key":"columnname2","value":"Refresh","id":2},{"key":"columnname3","value":"Tree configuration","id":3},{"key":"columnname4","value":"Add virtual folder","id":4}]},"Time":"19128","category":["AZURE"],"sqlTimeStamp":"2024-07-02 15:09:32","machineExecuted":"dccletest01","Remark":""},{"Build_Num":"260624131355265","Status":"SUCCESS","action_revision":"1713867220924","Data":{"data":[{"key":"columnname1","value":"Folders","id":0},{"key":"relative_command","value":"preceding","id":1},{"key":"columnname2","value":"Refresh","id":2},{"key":"columnname3","value":"Tree configuration","id":3},{"key":"columnname4","value":"Add virtual folder","id":4}]},"Time":"16436","category":["AWS"],"sqlTimeStamp":"2024-06-26 09:40:06","machineExecuted":"dccletest01","Remark":""},{"Build_Num":"24062418193223","Status":"SUCCESS","action_revision":"1713867220924","Data":{"data":[{"key":"columnname1","value":"Folders","id":0},{"key":"relative_command","value":"preceding","id":1},{"key":"columnname2","value":"Refresh","id":2},{"key":"columnname3","value":"Tree configuration","id":3},{"key":"columnname4","value":"Add virtual folder","id":4}]},"Time":"43269","category":["AWS"],"sqlTimeStamp":"2024-06-24 15:38:57","machineExecuted":"dccletest01","Remark":""},{"Build_Num":"210624163937669","Status":"SUCCESS","action_revision":"1713867220924","Data":{"data":[{"key":"columnname1","value":"Folders","id":0},{"key":"relative_command","value":"preceding","id":1},{"key":"columnname2","value":"Refresh","id":2},{"key":"columnname3","value":"Tree configuration","id":3},{"key":"columnname4","value":"Add virtual folder","id":4}]},"Time":"17336","category":["AWS"],"sqlTimeStamp":"2024-06-21 13:46:40","machineExecuted":"dccletest01","Remark":""}],
			reasons           :{"failureReasons":[],"analyses":["This test step has never passed in last 2 builds","The stability rate of this Test Step across all machines is 91%"]},
			testData          :{},
			urls              :{"action":"http:\/\/sat.eur.ad.sag\/#\/CNLAction\/mftcloud_verifyVFSPage\/trunk","step":"http:\/\/sat.eur.ad.sag\/#\/PID000973\/PID000973-TSID090971-TSID093980-TSID094043\/TSID094044\/TCID241988\/TSTID511720"},
			consoleLogs       : ``
		}
	</script>
	<script src="..\resources\lib\app.js"></script>
</head>
<body ng-app="myApp" ng-controller="myCtrl">
<nav class="navbar navbar-default">
	<div class="container-fluid">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#top-nav"
					aria-expanded="false">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="#">
				Test Step Analysis
			</a>
		</div>
		<div class="collapse navbar-collapse" id="top-nav">
			<ul class="nav navbar-nav navbar-right">
				<li ng-if="urls.step">
					<a href="{{ urls.step }}" target="_blank">Open Test Step</a>
				</li>
				<li ng-if="urls.action">
					<a href="{{ urls.action }}" target="_blank">Open Action</a>
				</li>
			</ul>
		</div>
	</div>
</nav>
<div class="container">
	<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
		<div class="panel panel-default" ng-if="failureReasons.length || analyses.length">
			<div class="panel-heading" role="tab" id="headingOne">
				<h4 class="panel-title">
					<a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne"
					   aria-expanded="true" aria-controls="collapseOne">
						Possible Reason For Test Step Failure and analysis
					</a>
				</h4>
			</div>
			<div id="collapseOne" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">
				<div class="panel-body">
					<div class="container-fluid">
						<div class="row">
							<ul class="list-group" style="white-space: pre-line;margin-bottom: 0;"
								ng-if="failureReasons.length">
								<span class="text-danger">Failure Reasons</span>
								<li class="list-group-item list-group-item-danger" ng-repeat="reason in failureReasons">
									{{reason}}
								</li>
							</ul>
							<ul class="list-group" style="white-space: pre-line;margin-bottom: 0;"
								ng-if="analyses.length">
								<span class="text-warning">Historical Analysis</span>
								<li class="list-group-item list-group-item-danger" ng-repeat="analysis in analyses">
									{{analysis}}
								</li>
							</ul>
							<div class="well" ng-if="comparison">
								<ng-include src="'comparison'"></ng-include>
							</div>
							<div class="well" ng-if="testData.isAvail">
								<p>Change in Test Data Detected for this test step.</p>
								<div class="table-responsive">
									<table class="table table-hover table-bordered table-condensed">
										<tr>
											<th>Old Data</th>
											<th>New Data</th>
										</tr>
										<tr>
											<td>
												<table class="table table-hover table-bordered table-condensed">
													<tr>
														<th>Key</th>
														<th>Value</th>
													</tr>
													<tr ng-repeat="(key,value) in testData.oldData">
														<td>{{ key }}</td>
														<td>{{ value }}</td>
													</tr>
												</table>
											</td>
											<td>
												<table class="table table-hover table-bordered table-condensed">
													<tr>
														<th>Key</th>
														<th>Value</th>
													</tr>
													<tr ng-repeat="(key,value) in testData.currentData">
														<td>{{ key }}</td>
														<td>{{ value }}</td>
													</tr>
												</table>
											</td>
										</tr>
									</table>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="panel panel-default" ng-if="a.data.length && a.data[0].length">
			<div class="panel-heading" role="tab" id="headingTwo">
				<h4 class="panel-title">
					<a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion"
					   href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
						Execution History in {{ machine }}
					</a>
				</h4>
			</div>
			<div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
				<div class="panel-body">
					<div class="container-fluid">
						<div class="row">
							<div class="col-10-md col-1-offset">
								<canvas id="bar1" class="chart chart-bar" chart-data="a.data"
										chart-labels="a.labels" chart-series="series" chart-options="options"
										chart-dataset-override="a.datasetOverride">
								</canvas>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="panel panel-default" ng-if="b.data.length && b.data[0].length">
			<div class="panel-heading" role="tab" id="headingFour">
				<h4 class="panel-title">
					<a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion"
					   href="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
						Execution History in Other Machines
					</a>
				</h4>
			</div>
			<div id="collapseFour" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFour">
				<div class="panel-body">
					<div class="container-fluid">
						<div class="row">
							<div class="col-10-md col-1-offset">
								<div class="col-10-md col-1-offset">
									<canvas id="bar2" class="chart chart-bar" chart-data="b.data"
											chart-labels="b.labels" chart-series="series" chart-options="options"
											chart-dataset-override="b.datasetOverride">
									</canvas>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="panel panel-default">
			<div class="panel-heading" role="tab" id="headingThree">
				<h4 class="panel-title">
					<a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseThree"
					   aria-expanded="true" aria-controls="collapseThree">
						Server Logs
					</a>
				</h4>
			</div>
			<div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
				<div class="panel-body">
					<div class="embed-responsive embed-responsive-16by9">
						<iframe src="./serverLogs.html" class="embed-responsive-item" frameborder="0"></iframe>
					</div>
				</div>
			</div>
		</div>
		<div class="panel panel-default" ng-if="consoleLogs">
			<div class="panel-heading" role="tab" id="headingFive">
				<h4 class="panel-title">
					<a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseFive"
					   aria-expanded="true" aria-controls="collapseFive">
						Console Logs
					</a>
				</h4>
			</div>
			<div id="collapseFive" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFive">
				<div class="panel-body" style="white-space:pre-line">
					{{consoleLogs}}
				</div>
			</div>
		</div>
	</div>
</div>

</body>
</html>
